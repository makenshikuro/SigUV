<?xml version='1.0' encoding='UTF-8' ?>
<!--

    Copyright (c) 2014 Oracle and/or its affiliates. All rights reserved.

    You may not modify, use, reproduce, or distribute this software except in
    compliance with  the terms of the License at:
    http://java.net/projects/javaeetutorial/pages/BerkeleyLicense

-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <!-- INTERFACE -->
    <cc:interface>
	<cc:attribute name="espacios" />
	
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>

 		<p/>
 			
		<p:dataTable id="espacio" var="p" value="#{espacios}" widgetVar="carsTable"
 		selection="#{espacioBean.selectedEspacio}" selectionMode="single" rowKey="#{p.idespacio}" 
 		emptyMessage="Ningun Espacio coincide con los criterios" filteredValue="#{espacioBean.filtroEspacio}">
 		
 		<p:column filterBy="#{p.idespacio}" headerText="Espacio" footerText="" filterMatchMode="contains"> 
            
             
        <p:outputLabel value="#{p.idespacio}"/>
            
        </p:column>
        <p:column filterBy="#{p.nombrees}" headerText="Nombre" footerText="" filterMatchMode="contains"> 
            
             
             <p:outputLabel value="#{p.nombrees}" />
        </p:column>
        
        
        
 		</p:dataTable>
 		
 	<p:contextMenu for="espacio">
        
        <p:menuitem value="Editar Espacio" icon="fa fa-fw fa-edit" action="#{espacioBean.editarEspacio(espacioBean.selectedEspacio.idespacio)}"/>
        
        
        <p:menuitem value="Borrar Espacio" icon="fa fa-fw fa-times-circle" action="#{espacioBean.eliminaEspacio(espacioBean.selectedEspacio.idespacio)}">
        	<p:confirm header="Confirmation" message="Estás seguro que desea borrar el edificio [ #{espacioBean.selectedEspacio.idespacio} ] ?" icon="ui-icon-alert" />
   
        </p:menuitem>
        
    </p:contextMenu>
   
 		 <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
        <p:commandButton value="Sí" type="button" styleClass="ui-confirmdialog-yes" icon="fa fa-check" />
        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="fa fa-times-circle" />
    </p:confirmDialog>
 	
 		<h:dataTable var="e"
                         summary="Espacio"
                         value="#{cc.attrs.espacios}"
                         rules="all"
                         cellpadding="5">
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Espacio"/>
                    </f:facet>
                    <h:outputText value="#{e.idespacio}"/>
                   
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Nombre"/>
                    </f:facet>
                    <h:outputText value="#{e.nombrees}"/>
                   
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Tipo"/>
                    </f:facet>
                    <h:outputText value="#{e.tipo}"/>
                   
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Bloque"/>
                    </f:facet>
                    <h:outputText value="#{e.bloque}"/>
                   
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Piso"/>
                    </f:facet>
                    <h:outputText value="#{e.piso}"/>
                   
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Nº Panoramas"/>
                    </f:facet>
                    <h:outputText value="#{e.panoramas.size()}"/>
                   
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Editar" />
                    </f:facet>
                    <h:commandButton action="#{espacioBean.editarEspacio(e.idespacio)}" value="Editar a #{e.idespacio}" />
                   
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Eliminar" />
                    </f:facet>
                    <h:commandButton action="#{espacioBean.eliminaEspacio(e.idespacio)}" onConfirmComplete="#{espacioBean.reload()}" value="Eliminar a #{e.idespacio}" />
                   
                </h:column>
                
                
            </h:dataTable>
   
 		 
            
        <p/>
  
    </cc:implementation>

</html>